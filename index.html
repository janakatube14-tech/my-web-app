<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art Gallery Order Management</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-left">
            <button class="hamburger" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <img src="logo.jpg" alt="Art Gallery Logo" class="logo">
            <h1>Art Gallery</h1>
        </div>
        <div class="header-right">
            <button class="theme-toggle" id="themeToggle">üåô</button>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>
    </header>

    <!-- Sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <aside class="sidebar" id="sidebar">
        <nav>
            <a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Dashboard</span>
            </a>
            <a href="#add-order" class="nav-link" onclick="showSection('add-order')">
                <span class="nav-icon">‚ûï</span>
                <span class="nav-text">Add Order</span>
            </a>
            <a href="#need-deliver" class="nav-link" onclick="showSection('need-deliver')">
                <span class="nav-icon">üì¶</span>
                <span class="nav-text">Need to Deliver</span>
            </a>
            <a href="#dispatched" class="nav-link" onclick="showSection('dispatched')">
                <span class="nav-icon">üöö</span>
                <span class="nav-text">Dispatched</span>
            </a>
            <a href="#delivered" class="nav-link" onclick="showSection('delivered')">
                <span class="nav-icon">‚úÖ</span>
                <span class="nav-text">Delivered</span>
            </a>
            <a href="#refund" class="nav-link" onclick="showSection('refund')">
                <span class="nav-icon">‚Ü©Ô∏è</span>
                <span class="nav-text">Refund</span>
            </a>
            <a href="#expenses" class="nav-link" onclick="showSection('expenses')">
                <span class="nav-icon">üí∞</span>
                <span class="nav-text">Expenses</span>
            </a>
            <a href="#analytics" class="nav-link" onclick="showSection('analytics')">
                <span class="nav-icon">üìà</span>
                <span class="nav-text">Analytics</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <h2>Dashboard</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Orders</h3>
                    <p class="stat-value" id="totalOrders">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Revenue</h3>
                    <p class="stat-value">Rs. <span id="totalRevenue">0</span></p>
                </div>
                <div class="stat-card">
                    <h3>Total Frame Cost</h3>
                    <p class="stat-value">Rs. <span id="totalFrameCost">0</span></p>
                </div>
                <div class="stat-card">
                    <h3>Other Expenses</h3>
                    <p class="stat-value">Rs. <span id="totalExpenses">0</span></p>
                </div>
                <div class="stat-card highlight">
                    <h3>Net Profit</h3>
                    <p class="stat-value">Rs. <span id="netProfit">0</span></p>
                </div>
                <div class="stat-card pending" onclick="showSection('need-deliver')">
                    <h3>Pending Orders</h3>
                    <p class="stat-value" id="pendingOrders">0</p>
                    <small>Click to view ‚Üí</small>
                </div>
            </div>
        </section>

        <!-- Add Order Section -->
        <section id="add-order" class="section">
            <h2>Add New Order</h2>
            <form id="orderForm" class="order-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="orderNumber">Order Number *</label>
                        <input type="text" id="orderNumber" required>
                    </div>

                    <div class="form-group">
                        <label for="orderDate">Order Date *</label>
                        <input type="date" id="orderDate" required>
                    </div>

                    <div class="form-group">
                        <label for="customerName">Customer Name *</label>
                        <input type="text" id="customerName" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" required>
                    </div>

                    <div class="form-group full-width">
                        <label for="addressLine">Address Line *</label>
                        <input type="text" id="addressLine" required>
                    </div>

                    <div class="form-group">
                        <label for="city">City *</label>
                        <input type="text" id="city" required>
                    </div>

                    <div class="form-group">
                        <label for="district">District *</label>
                        <select id="district" required>
                            <option value="">Select District</option>
                            <option value="Colombo">Colombo</option>
                            <option value="Gampaha">Gampaha</option>
                            <option value="Kalutara">Kalutara</option>
                            <option value="Kandy">Kandy</option>
                            <option value="Matale">Matale</option>
                            <option value="Nuwara Eliya">Nuwara Eliya</option>
                            <option value="Galle">Galle</option>
                            <option value="Matara">Matara</option>
                            <option value="Hambantota">Hambantota</option>
                            <option value="Jaffna">Jaffna</option>
                            <option value="Kilinochchi">Kilinochchi</option>
                            <option value="Mannar">Mannar</option>
                            <option value="Vavuniya">Vavuniya</option>
                            <option value="Mullaitivu">Mullaitivu</option>
                            <option value="Batticaloa">Batticaloa</option>
                            <option value="Ampara">Ampara</option>
                            <option value="Trincomalee">Trincomalee</option>
                            <option value="Kurunegala">Kurunegala</option>
                            <option value="Puttalam">Puttalam</option>
                            <option value="Anuradhapura">Anuradhapura</option>
                            <option value="Polonnaruwa">Polonnaruwa</option>
                            <option value="Badulla">Badulla</option>
                            <option value="Moneragala">Moneragala</option>
                            <option value="Ratnapura">Ratnapura</option>
                            <option value="Kegalle">Kegalle</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="orderNotes">Order Notes</label>
                        <textarea id="orderNotes" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="orderType">Order Type *</label>
                        <select id="orderType" onchange="toggleCustomPrice()" required>
                            <option value="standard">Standard Frame</option>
                            <option value="custom">Custom Price</option>
                        </select>
                    </div>

                    <div id="standardFrameSection">
                        <div class="form-group">
                            <label for="frameType">Frame Type *</label>
                            <select id="frameType" onchange="updatePrice()">
                                <option value="">Select Type</option>
                                <option value="Ply Mount">Ply Mount</option>
                                <option value="Glass Frame">Glass Frame</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="frameSize">Frame Size *</label>
                            <select id="frameSize" onchange="updatePrice()">
                                <option value="">Select Size</option>
                                <option value="4x6">4x6</option>
                                <option value="6x8">6x8</option>
                                <option value="8x10">8x10</option>
                                <option value="8x12">8x12</option>
                                <option value="10x12">10x12</option>
                                <option value="10x15">10x15</option>
                                <option value="12x15">12x15</option>
                                <option value="12x18">12x18</option>
                                <option value="16x24">16x24</option>
                                <option value="20x30">20x30</option>
                            </select>
                        </div>
                    </div>

                    <div id="customPriceSection" style="display: none;">
                        <div class="form-group">
                            <label for="customFrameDesc">Frame Description *</label>
                            <input type="text" id="customFrameDesc" placeholder="e.g., Custom 15x20 Wood Frame">
                        </div>

                        <div class="form-group">
                            <label for="customPrice">Custom Price (Rs.) *</label>
                            <input type="number" id="customPrice" step="0.01" min="0">
                        </div>

                        <div class="form-group">
                            <label for="customCost">Custom Cost (Rs.) *</label>
                            <input type="number" id="customCost" step="0.01" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="quantity">Quantity *</label>
                        <div class="quantity-control">
                            <button type="button" onclick="decrementQty()">-</button>
                            <input type="number" id="quantity" value="1" min="1" onchange="calculateTotal()">
                            <button type="button" onclick="incrementQty()">+</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="unitPrice">Unit Price (Rs.)</label>
                        <input type="number" id="unitPrice" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label for="unitCost">Unit Cost (Rs.)</label>
                        <input type="number" id="unitCost" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label for="totalPrice">Total Price (Rs.)</label>
                        <input type="number" id="totalPrice" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label for="totalCost">Total Cost (Rs.)</label>
                        <input type="number" id="totalCost" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label for="orderStatus">Order Status *</label>
                        <select id="orderStatus" required>
                            <option value="Need to Deliver">Need to Deliver</option>
                            <option value="Dispatched">Dispatched</option>
                            <option value="Delivered">Delivered</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="paymentMethod">Payment Method *</label>
                        <select id="paymentMethod" required>
                            <option value="COD">COD</option>
                            <option value="Online Payment">Online Payment</option>
                            <option value="Bank Transfer">Bank Transfer</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn-submit">Add Order</button>
            </form>
        </section>

        <!-- Need to Deliver Section -->
        <section id="need-deliver" class="section">
            <div class="section-header">
                <h2>üì¶ Need to Deliver</h2>
                <div class="section-stats">
                    <span>Total Cost: Rs. <span id="needDeliverCost">0.00</span></span>
                    <span>Total Profit: Rs. <span id="needDeliverProfit">0.00</span></span>
                </div>
            </div>
            <div id="needDeliverList" class="orders-list"></div>
        </section>

        <!-- Dispatched Section -->
        <section id="dispatched" class="section">
            <div class="section-header">
                <h2>üöö Dispatched Orders</h2>
                <div class="section-stats">
                    <span>Total Cost: Rs. <span id="dispatchedCost">0.00</span></span>
                    <span>Total Profit: Rs. <span id="dispatchedProfit">0.00</span></span>
                </div>
            </div>
            <div id="dispatchedList" class="orders-list"></div>
        </section>

        <!-- Delivered Section -->
        <section id="delivered" class="section">
            <div class="section-header">
                <h2>‚úÖ Delivered Orders</h2>
                <div class="section-stats">
                    <span>Total Cost: Rs. <span id="deliveredCost">0.00</span></span>
                    <span>Total Profit: Rs. <span id="deliveredProfit">0.00</span></span>
                </div>
            </div>
            <div id="deliveredList" class="orders-list"></div>
        </section>

        <!-- Refund Section -->
        <section id="refund" class="section">
            <div class="section-header">
                <h2>‚Ü©Ô∏è Refunded Orders</h2>
                <div class="section-stats">
                    <span>Total Loss: Rs. <span id="refundCost">0.00</span></span>
                </div>
            </div>
            <div id="refundList" class="orders-list"></div>
        </section>

        <!-- Expenses Section -->
        <section id="expenses" class="section">
            <h2>üí∞ Other Expenses</h2>
            <form id="expenseForm" class="expense-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="expenseDesc">Description *</label>
                        <input type="text" id="expenseDesc" required>
                    </div>
                    <div class="form-group">
                        <label for="expenseAmount">Amount (Rs.) *</label>
                        <input type="number" id="expenseAmount" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="expenseDate">Date *</label>
                        <input type="date" id="expenseDate" required>
                    </div>
                </div>
                <button type="submit" class="btn-submit">Add Expense</button>
            </form>
            <div id="expensesList" class="expenses-list"></div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section">
            <h2>üìà Sales Analytics</h2>
            
            <div class="analytics-grid">
                <div class="stat-card">
                    <h3>Top Selling Size</h3>
                    <p class="stat-value" id="topSize">-</p>
                    <small id="topSizeCount">0 orders</small>
                </div>
                <div class="stat-card">
                    <h3>Least Selling Size</h3>
                    <p class="stat-value" id="leastSize">-</p>
                    <small id="leastSizeCount">0 orders</small>
                </div>
                <div class="stat-card">
                    <h3>Top District</h3>
                    <p class="stat-value" id="topDistrict">-</p>
                    <small id="topDistrictCount">0 orders</small>
                </div>
                <div class="stat-card">
                    <h3>COD Orders</h3>
                    <p class="stat-value" id="codPercentage">0%</p>
                    <small id="codCount">0 orders</small>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3>Orders by Frame Size</h3>
                    <canvas id="frameSizeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Payment Methods</h3>
                    <canvas id="paymentChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Orders by District</h3>
                    <canvas id="districtChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Frame Type Distribution</h3>
                    <canvas id="frameTypeChart"></canvas>
                </div>
                <div class="chart-container full-width">
                    <h3>Orders by City</h3>
                    <canvas id="cityChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD4cllOCGjbhqQtIpA33X1umdwAJSWtQIo",
            authDomain: "my-art-gallery-database.firebaseapp.com",
            databaseURL: "https://my-art-gallery-database-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "my-art-gallery-database",
            storageBucket: "my-art-gallery-database.firebasestorage.app",
            messagingSenderId: "384625725027",
            appId: "1:384625725027:web:54eeca619c79547bcdb256",
            measurementId: "G-LMPGKDWC1X"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);

        // Make database and auth available globally
        window.database = database;
        window.auth = auth;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebasePush = push;
        window.firebaseOnValue = onValue;
        window.firebaseRemove = remove;
        window.firebaseUpdate = update;
        window.firebaseSignOut = signOut;
    </script>
    
    <script src="script.js"></script>
</body>
</html>
